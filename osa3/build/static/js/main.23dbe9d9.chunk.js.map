{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","handleFilterChange","filter","onChange","value","PersonForm","addPerson","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","type","Person","person","deleteMethod","name","number","onClick","Persons","persons","p","toLowerCase","includes","map","key","Notification","message","className","Error","App","useState","setPersons","setNewName","setNewNumber","setFilter","notification","setNotification","error","setError","useEffect","personService","initialPersons","event","target","preventDefault","personObject","oldPerson","find","undefined","addedPerson","concat","setTimeout","catch","window","confirm","editedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.23dbe9d9.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport './App.css'\n\n\nconst Filter = ({ handleFilterChange, filter }) => {\n  return (\n    <div>\n      filter shown with: <input onChange={handleFilterChange} value={filter} />\n    </div>\n  )\n}\n\n\nconst PersonForm = ({ addPerson, handleNameChange, handleNumberChange, newName, newNumber }) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input onChange={handleNameChange} value={newName} />\n      </div>\n      <div>\n        number: <input onChange={handleNumberChange} value={newNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\n\nconst Person = ({ person, deleteMethod }) => {\n  return (\n    <div>\n      {person.name} {person.number} <button onClick={() => deleteMethod(person.id)}>delete</button>\n    </div>\n  )\n}\n\n\nconst Persons = ({ persons, filter, deleteMethod }) => {\n  let p = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n  p = p.map(person => <Person key={person.id} person={person} deleteMethod={deleteMethod} />)\n  return (<div>{p}</div>)\n}\n\n\nconst Notification = ({ message }) => {\n  if (message == null) {\n    return null\n  }\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  )\n}\n\n\nconst Error = ({ message }) => {\n  if (message == null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [notification, setNotification] = useState(null)\n  const [error, setError] = useState(null)\n\n  // alkutila --> haetaan data kannasta\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  // lisätään henkilö\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    const oldPerson = persons.find(person => person.name === personObject.name)\n    if (oldPerson !== undefined) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        personService\n          .update(oldPerson.id, personObject)\n          .then(editedPerson => {\n            setPersons(persons.map(person => person.id !== oldPerson.id ? person : editedPerson))\n            setNotification(`Updated ${oldPerson.name}`)\n            setTimeout(() => { setNotification(null) }, 2000)\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => { // henkilö ehdittiin poistaa\n            setPersons(persons.filter(person => person.id !== oldPerson.id))\n            setError(`Information of ${oldPerson.name} has already been removed from server`)\n            setTimeout(() => { setError(null) }, 2000)\n          })\n      }\n      return\n    }\n    personService\n      .create(personObject)\n      .then(addedPerson => {\n        setPersons(persons.concat(addedPerson))\n        setNotification(`Added ${addedPerson.name}`)\n        setTimeout(() => { setNotification(null) }, 2000)\n      })\n      .catch(error => {\n        setError(error.response.data.error)\n        setTimeout(() => { setError(null) }, 2000)\n      })\n    setNewName('')\n    setNewNumber('')\n  }\n\n  // poistetaan henkilö\n  const deletePerson = (id) => {\n    const person = persons.find(person => person.id === id)\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personService\n        .remove(id)\n        .then(response => {\n          setPersons(persons.filter(person => person.id !== id))\n          setNotification(`Removed ${person.name}`)\n          setTimeout(() => { setNotification(null) }, 2000)\n        })\n        .catch(error => {\n          // henkilö oli jo ehditty poistaa, mutta sillä ei ole merkitystä käyttäjälle\n          setError(`Information of ${person.name} has already been removed from server`)\n          setTimeout(() => { setError(null) }, 2000)\n          setPersons(persons.filter(person => person.id !== id))\n        })\n    }\n  }\n\n  // lisättävän nimen muokkaus\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  // lisättävän puhelinnumeron muokkaus\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  // filtterin muokkaus\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} />\n      <Error message={error} />\n      <Filter handleFilterChange={handleFilterChange} filter={filter} />\n\n      <h3>add a new</h3>\n      <PersonForm\n        addPerson={addPerson}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n      />\n\n      <h3>Numbers</h3>\n      <Persons persons={persons} filter={filter} deleteMethod={deletePerson} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}